---
title: Git
layout: post
date: 2018-02-06 20:14:17
categories: Git
tags: Git
---

## git 常用命令

- `git add *` 和 `git add .`
  `git add .`会提交所有 untracked 文件、文件夹、包括以 `.`开头的文件
  `git add *`会提交所有 untracked 文件夹、文件、但不包括`.`开头的文件
- `git reset HEAD <file>` 撤回已经被 add 但没有被 commit 的文件
- `git checkout --track origin/special` 该命令会在本地创建一个 special 分支用于跟踪远端的 special 分支并将本地分支切换到 special 分支
- `git checkout [filename]`放弃对本地已修改但尚未 add 的文件的修改，还原其到未修改前的状态。
  此命令和 github client 的 `discard changes`的却别: `discard changes` 可以放弃已经被 add 的文件，但`git checkout [filename]`不能，只能放弃没有被 add 的
- `git checkout .` 放弃所有本地已修改但尚未 add 的文件的修改，但不包括新增的文件
- `git branch -a` 列出本地和远程分支
- `git branch [name] -D` 删除本地分支
- `git commit -m'' —-amend` 合并多个 commit 为一个
- `git reset --soft origin/[branch]` 撤回所有的 commit 记录，同步到 `origin/[branch]`。
  它本质上是撤销了上一次 git commit 命令。 当你在运行 git commit 时，Git 会创建一个新的提交，并移动 HEAD 所指向的分支来使其指向该提交。 当你将它 reset 回 HEAD~（HEAD 的父结点）时，其实就是把该分支移动回原来的位置，而不会改变索引和工作目录。 现在你可以更新索引并再次运行 `git commit` 来完成 `git commit -m'' --amend` 所要做的事情了
- `git log` 查看日志，退出`fn + Q`
- `git log -p [file]` — 查看某个文件的内容变化详情
- `git log —online` 简洁模式显示 log 记录
- `git fetch`：当此命令从服务器上抓取本地没有的数据时，它并不会修改工作目录中的内容。 它只会获取数据然后让你自己合并。 然而，有一个命令叫作 git pull 在大多数情况下它的含义是一个 git fetch 紧接着一个 git merge 命令。git pull = git fetch + git merge
- git 回滚 
1. `git -log` 找到对应的
  `commit 1a864433ec4a9bd712d921859a8a474510e7e871` 
2. `git revert [commitId]`: 当提交过的某一 commit 不论多久，都可以使用此命令逆向恢复当时的 commit 的更改内容并生成一个新的 commit ，相当于图形化的 revert (:q 退出时会自动 commit )，也可以强制关闭重新修改代码然后手动添加 commit（推荐使用！！！） 
3. `git reset --soft [commitId]` 会将某个 commit 之前的所有更改内容暂存到本地，不会丢失，但是会将多个 commit 的更改混淆 
4. `git reset —-hard [commitId]` 会指向某个 commit 并将之前的内容全部舍弃，本地也不会暂存（慎用！！！）
- `git pull --rebase --autostash` 在操作开始之前建立一个临时存储
- `git stash` 当前分支有更改，此时想切换分支，但不想提交正在进行的工作，可以储藏这些变更往堆栈推送一个新的储藏
```
// 执行 git stash 命令
Saved working directory and index state WIP on 1.0.3: 39d9e76 add: image and iframe onload
```
- `git stash list` 要查看现有的储藏
```
stash@{0}: WIP on 1.0.3: 39d9e76 add: image and iframe onload
stash@{1}: autostash
stash@{2}: autostash
stash@{3}: autostash
```
- `git stash apply [stash@{0}]` 重新应用之前的储藏，默认为第一个,储藏的内容仍然在栈上
- `git stash drop [stash@{0}]` 移除栈上的存储，默认为第一个
- `git remote -v`查看远程仓库
- `git remote add [shortname] [url]` 添加一个远程仓库地址(url)和缩写(shortname)git
- `git remote rename origin icode` 修改某个远程仓库在本地的简称，此命令指将 origin 远程名改为 code
- `git remote rm` 删除本地的远程链接
- `git push gitlab 1.0.3` 将本地推到 gitlab 远端的 1.0.3 分支
- `git pull gitlab 1.0.3` 拉取远端的 1.0.3 分支
